<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ironbar.github.io/arc25/modeling/Iteration_16_search_with_base_models/">
      
      
        <link rel="prev" href="../Iteration_15_the_path_forward/">
      
      
        <link rel="next" href="../Iteration_17_increase_search_diversity/">
      
      
      <link rel="icon" href="../../res/arc_icon.jpg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.40">
    
    
      
        <title>Iteration 16. Search with base models - arc25</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#iteration-16-search-with-base-models" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="arc25" class="md-header__button md-logo" aria-label="arc25" data-md-component="logo">
      
  <img src="../../res/arc_icon.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            arc25
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Iteration 16. Search with base models
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ironbar/arc25" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../01_Business_Understanding/" class="md-tabs__link">
        
  
    
  
  Business Understanding

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../02_Data_Understanding/" class="md-tabs__link">
        
  
    
  
  Data Understanding

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../03_State_of_the_art/" class="md-tabs__link">
        
  
    
  
  State of the art

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../04_Initial_Plan/" class="md-tabs__link">
        
  
    
  
  Initial Plan

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../Iteration_01_architects_baseline/" class="md-tabs__link">
          
  
    
  
  Modeling

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../utils/00_Challenge_Workflow/" class="md-tabs__link">
          
  
    
  
  Utils

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../05_Solution_Summary/" class="md-tabs__link">
        
  
    
  
  Solution summary

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="arc25" class="md-nav__button md-logo" aria-label="arc25" data-md-component="logo">
      
  <img src="../../res/arc_icon.jpg" alt="logo">

    </a>
    arc25
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ironbar/arc25" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01_Business_Understanding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Business Understanding
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02_Data_Understanding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Understanding
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03_State_of_the_art/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    State of the art
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04_Initial_Plan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Initial Plan
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Modeling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Modeling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_01_architects_baseline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 1. Architects baseline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_02_8_fold/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 2. Architects solution with 8 data splits
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_03_ideal_test_time_training/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 3. Ideal test-time training setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_04_first_steps_with_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 4. First steps with code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_05_test_time_training_with_code_HER/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 5. Test-time training with code. Hindsight Experience Replay (HER)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_06_reinforcement_learning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 6. Reinforcement learning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_07_optimize_ttt_on_evaluation_set/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 7. Optimize TTT on the evaluation set
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_08_improve_HER/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 8. Improve HER
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_09_improve_training_script/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 9. Improve training script
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_10_solve_arc_tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 10. Try to solve real ARC tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_11_pretrain_lora_on_new_tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 11. Pretrain LoRA on new tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_12_solve_a_few_arc_tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 12. Solve a few ARC tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_13_reflections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 13. Reflections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_14_optimize_inference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 14. Optimize inference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_15_the_path_forward/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 15. The path forward: Search &amp; Learn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Iteration 16. Search with base models
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Iteration 16. Search with base models
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    <span class="md-ellipsis">
      Goal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    <span class="md-ellipsis">
      Development
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Development">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-dsls" class="md-nav__link">
    <span class="md-ellipsis">
      Public DSLs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vllm-vs-transformers" class="md-nav__link">
    <span class="md-ellipsis">
      VLLM vs transformers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#try-the-qwen25-coder-14b-instruct-model" class="md-nav__link">
    <span class="md-ellipsis">
      Try the Qwen2.5-Coder-14B-Instruct model
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#results" class="md-nav__link">
    <span class="md-ellipsis">
      Results
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-size-matters" class="md-nav__link">
    <span class="md-ellipsis">
      Model size matters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model size matters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#10-tasks-64-predictions-per-task" class="md-nav__link">
    <span class="md-ellipsis">
      10 tasks, 64 predictions per task
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#400-training-tasks-8-predictions-per-task" class="md-nav__link">
    <span class="md-ellipsis">
      400 training tasks, 8 predictions per task
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect-of-the-number-of-predictions-with-independent-search" class="md-nav__link">
    <span class="md-ellipsis">
      Effect of the number of predictions with independent search
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#can-we-increase-the-unique-outputs-by-conditioning-on-already-generated-code" class="md-nav__link">
    <span class="md-ellipsis">
      Can we increase the unique outputs by conditioning on already generated code?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next steps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#todo" class="md-nav__link">
    <span class="md-ellipsis">
      TODO
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_17_increase_search_diversity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 17. Increase search diversity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_19_search_with_BARC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 19. Search with BARC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_20_data_augmentation_with_BARC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 20. Data augmentation with BARC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_21_fix_bug_with_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 21. Fix bug with data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_22_ttt_BARC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 22. Test-time Training with BARC induction model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_23_ttt_BARC_v2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 23. All in with test-time training with BARC induction model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_24_RL_BARC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 24. Using RL to improve BARC induction model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_25_debug_parallel_code_execution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 25. Debug parallel code execution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_26_more_compute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 26. Acquire more compute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_27_improve_search_and_learn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 27. Improve search and learn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_28_refine_predictions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 28. Refine predictions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_29_multi-gpu-rl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 29. Multi-gpu RL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_30_solve_RL_collapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 30. Solve RL Collapse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_31_how_to_improve/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 31. How to improve from 20% to 100%?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_32_analyze_model_predictions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 32. Analyze model predictions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_33_rl_barc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 33. RL with BARC data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_34_multi-turn_rl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 34. Multi-turn RL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_35_fp16_vs_bf16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration 35. FP16 vs BF16
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Iteration_n/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration n. Iteration_title
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6">
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Utils
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/00_Challenge_Workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Challenge workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/markdown_cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Markdown cheatsheet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/methodology/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Methodology
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05_Solution_Summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Solution summary
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#goal" class="md-nav__link">
    <span class="md-ellipsis">
      Goal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    <span class="md-ellipsis">
      Development
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Development">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-dsls" class="md-nav__link">
    <span class="md-ellipsis">
      Public DSLs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vllm-vs-transformers" class="md-nav__link">
    <span class="md-ellipsis">
      VLLM vs transformers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#try-the-qwen25-coder-14b-instruct-model" class="md-nav__link">
    <span class="md-ellipsis">
      Try the Qwen2.5-Coder-14B-Instruct model
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#results" class="md-nav__link">
    <span class="md-ellipsis">
      Results
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-size-matters" class="md-nav__link">
    <span class="md-ellipsis">
      Model size matters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model size matters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#10-tasks-64-predictions-per-task" class="md-nav__link">
    <span class="md-ellipsis">
      10 tasks, 64 predictions per task
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#400-training-tasks-8-predictions-per-task" class="md-nav__link">
    <span class="md-ellipsis">
      400 training tasks, 8 predictions per task
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect-of-the-number-of-predictions-with-independent-search" class="md-nav__link">
    <span class="md-ellipsis">
      Effect of the number of predictions with independent search
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#can-we-increase-the-unique-outputs-by-conditioning-on-already-generated-code" class="md-nav__link">
    <span class="md-ellipsis">
      Can we increase the unique outputs by conditioning on already generated code?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next steps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#todo" class="md-nav__link">
    <span class="md-ellipsis">
      TODO
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="iteration-16-search-with-base-models">Iteration 16. Search with base models</h1>
<p><em>17-06-2025</em></p>
<!---
The work is done using short iterations. Each iteration needs to have a very
clear goal. This allows to gain greater knowledge of the problem on each iteration.

<details>
  <summary>Click to expand/collapse this section</summary>
</details>
--->

<h2 id="goal">Goal</h2>
<p>Can I solve training ARC tasks using a base model with access to a DSL?</p>
<h2 id="motivation">Motivation</h2>
<p>The <a href="https://icml.cc/virtual/2025/poster/43499">SOAR paper</a> has shown that it is possible to use Qwen-Coder models to solve ARC tasks without the need of fine-tuning (although fine-tuning improves the scores.)</p>
<p>On this iteration I will try to replicate that work but instead of using plain python I will give access to a DSL that hopefully will ease the search process.</p>
<p>I could explore how to generate new functions, refine existing ones or combine multiple functions.</p>
<h2 id="development">Development</h2>
<h3 id="public-dsls">Public DSLs</h3>
<ul>
<li><a href="https://github.com/xu3kev/BARC">BARC</a>: 54 primitive functions, solve around 160 training tasks.
  Does not have typed hints.</li>
<li><a href="https://github.com/michaelhodel/re-arc">RE-ARC</a>: 160 primitive functions, verified to be complete
  for the ARC-AGI-1 train set. The problem of this DSL is that the verifiers that implement the training
  task are very hard to understand. Maybe I can refactor it using Codex but seems like a very difficult task.</li>
</ul>
<p>Having a big number of primitive functions will result in a bigger prompt if we want to give the LLM
the footprint of all the functions. Also make the combinatorial problem harder. The DSL should be
as minimal as possible.</p>
<h3 id="vllm-vs-transformers">VLLM vs transformers</h3>
<table>
<thead>
<tr>
<th>Model</th>
<th>VLLM</th>
<th>VLLM quantized</th>
<th>transformers</th>
<th>transformers quantized</th>
<th>speedup</th>
<th>speedup quantized</th>
</tr>
</thead>
<tbody>
<tr>
<td>Qwen2.5-Coder-0.5B-Instruct</td>
<td>1107</td>
<td>563</td>
<td>48</td>
<td>36</td>
<td>23.1</td>
<td>15.6</td>
</tr>
<tr>
<td>Qwen2.5-Coder-1.5B-Instruct</td>
<td>426</td>
<td>282</td>
<td>42</td>
<td>29</td>
<td>10.1</td>
<td>9.7</td>
</tr>
<tr>
<td>Qwen2.5-Coder-3B-Instruct</td>
<td>452</td>
<td>180</td>
<td>32</td>
<td>24</td>
<td>14.1</td>
<td>7.5</td>
</tr>
<tr>
<td>Qwen2.5-Coder-7B-Instruct</td>
<td>200</td>
<td>100</td>
<td>-</td>
<td>27</td>
<td>-</td>
<td>3.7</td>
</tr>
</tbody>
</table>
<p>VLLM is much faster than transformer when doing sequential inference (batch size 1).</p>
<p>And I also have noticed that VLLM benefits from making multiple predictions for the same prompt. For
example for the the following models we can increase the throughput (tokens/s) x8.</p>
<table>
<thead>
<tr>
<th>batch size</th>
<th>Qwen2.5-Coder-0.5B-Instruct</th>
<th>Qwen2.5-Coder-7B-Instruct</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1107</td>
<td>100</td>
</tr>
<tr>
<td>2</td>
<td>1571</td>
<td>135</td>
</tr>
<tr>
<td>4</td>
<td>3199</td>
<td>248</td>
</tr>
<tr>
<td>8</td>
<td>3837</td>
<td>354</td>
</tr>
<tr>
<td>16</td>
<td>5845</td>
<td>609</td>
</tr>
<tr>
<td>32</td>
<td>6094</td>
<td>870</td>
</tr>
</tbody>
</table>
<p>So for the smaller model we could generate around 6k tokens per second. That would be 1e9 tokens
if we generate with 4 GPUs for 12 hours. As a reference OpenAI generated 5.7e9 tokens to solve the test
set from ARC-AGI-1.</p>
<p>After seeing this huge differences in speed I will be using only VLLM on this iteration.</p>
<p>I have also seen that <code>enable_prefix_caching</code> allows faster execution the second time we call the model.
If the number of output tokens is small we can notice the inference speed, for example increasing to 150 tokens/second from an initial 75. For longer generations the effect is not that big.</p>
<h3 id="try-the-qwen25-coder-14b-instruct-model">Try the Qwen2.5-Coder-14B-Instruct model</h3>
<p>Just loading the 14B model with VLLM takes 4 minutes, although is a <a href="https://huggingface.co/Qwen/Qwen2.5-Coder-14B-Instruct-GGUF">4-bit quantized GGUF version</a>.
I had to also download the tokenizer from the <a href="https://huggingface.co/Qwen/Qwen2.5-Coder-14B-Instruct">normal version</a></p>
<p>It is capable of generating text at 100 tokens/s.</p>
<h2 id="results">Results</h2>
<h3 id="model-size-matters">Model size matters</h3>
<h4 id="10-tasks-64-predictions-per-task">10 tasks, 64 predictions per task</h4>
<p>The plot below shows the valid outputs probability and the dsl usage of Qwen2.5-Coder with different
sizes. The size is really important (at least for base models). Bigger models generate valid
outputs more frequently and use the dsl more frequently as well. All predictions are independent.</p>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../res/1753292348173_image.png" data-desc-position="bottom"><img alt="alt text" src="../res/1753292348173_image.png"></a></p>
<p>To be able to use the 14B model I had to use <code>tensor_parallel_size=2</code> and halve the <code>max_model_len=16000</code>.</p>
<p>I have also tried Qwen3 but it was slower and worse, so I will be using Qwen2.5-Coder-7B for the experiments
in this iteration.</p>
<h4 id="400-training-tasks-8-predictions-per-task">400 training tasks, 8 predictions per task</h4>
<table>
<thead>
<tr>
<th>parameters</th>
<th>0.5B</th>
<th>1.5B</th>
<th>3B</th>
<th>7B</th>
<th>14B</th>
</tr>
</thead>
<tbody>
<tr>
<td>valid code</td>
<td>87.6%</td>
<td>98.5%</td>
<td>96.3%</td>
<td>99.6%</td>
<td>99.9%</td>
</tr>
<tr>
<td>valid outputs</td>
<td>15.6%</td>
<td>45.6%</td>
<td>47.6%</td>
<td>78.0%</td>
<td>85.3%</td>
</tr>
<tr>
<td>unique outputs</td>
<td>13.2%</td>
<td>39.5%</td>
<td>39.6%</td>
<td>50.6%</td>
<td>28.4%</td>
</tr>
<tr>
<td>dsl usage</td>
<td>29.4%</td>
<td>30.9%</td>
<td>40.3%</td>
<td>56.5%</td>
<td>87.6%</td>
</tr>
<tr>
<td>mean pixel similarity score</td>
<td>32.5%</td>
<td>43.4%</td>
<td>47.8%</td>
<td>52.9%</td>
<td>59.1%</td>
</tr>
<tr>
<td>correct grids</td>
<td>0.1%</td>
<td>0.2%</td>
<td>0.8%</td>
<td>1.7%</td>
<td>1.8%</td>
</tr>
<tr>
<td>solved tasks</td>
<td>0.0%</td>
<td>0.0%</td>
<td>0.8%</td>
<td>2.5%</td>
<td>3.8%</td>
</tr>
<tr>
<td>inference time</td>
<td>460</td>
<td>425</td>
<td>1008</td>
<td>744</td>
<td>5505</td>
</tr>
</tbody>
</table>
<p>This table shows the same experiment but with a bigger number of tasks. The sweet spot for my hardware
seems to be the Qwen2.5-Coder-7B model.</p>
<p>It can be seen that using bigger models leads to better metrics.</p>
<h3 id="effect-of-the-number-of-predictions-with-independent-search">Effect of the number of predictions with independent search</h3>
<p>The following table shows results for the <code>Qwen2.5-Coder-7B</code> model when changing the number of
predictions and doing independent search. No data augmentation was used (which would likely increase the diversity of the predictions).</p>
<table>
<thead>
<tr>
<th>predictions</th>
<th>2</th>
<th>4</th>
<th>8</th>
<th>16</th>
<th>32</th>
<th>64</th>
<th>128</th>
<th>256</th>
<th>512</th>
</tr>
</thead>
<tbody>
<tr>
<td>valid code</td>
<td>99.1%</td>
<td>99.1%</td>
<td>99.6%</td>
<td>99.7%</td>
<td>99.8%</td>
<td>99.7%</td>
<td>99.8%</td>
<td>99.8%</td>
<td>99.8%</td>
</tr>
<tr>
<td>valid outputs</td>
<td>75.4%</td>
<td>78.2%</td>
<td>78.0%</td>
<td>79.2%</td>
<td>79.0%</td>
<td>78.8%</td>
<td>79.1%</td>
<td>79.0%</td>
<td>79.1%</td>
</tr>
<tr>
<td>unique outputs</td>
<td>65.9%</td>
<td>59.8%</td>
<td>50.6%</td>
<td>42.1%</td>
<td>35.7%</td>
<td>30.8%</td>
<td>26.9%</td>
<td>23.6%</td>
<td>20.8%</td>
</tr>
<tr>
<td>dsl usage</td>
<td>61.0%</td>
<td>56.9%</td>
<td>56.5%</td>
<td>57.6%</td>
<td>58.7%</td>
<td>58.6%</td>
<td>58.3%</td>
<td>58.4%</td>
<td>58.4%</td>
</tr>
<tr>
<td>mean pixel similarity score</td>
<td>50.4%</td>
<td>53.5%</td>
<td>52.9%</td>
<td>53.1%</td>
<td>53.5%</td>
<td>53.1%</td>
<td>53.2%</td>
<td>53.1%</td>
<td>53.2%</td>
</tr>
<tr>
<td>correct grids</td>
<td>2.1%</td>
<td>1.8%</td>
<td>1.7%</td>
<td>1.9%</td>
<td>2.0%</td>
<td>1.8%</td>
<td>1.8%</td>
<td>1.8%</td>
<td>1.8%</td>
</tr>
<tr>
<td>solved tasks</td>
<td>2.0%</td>
<td>2.0%</td>
<td>2.5%</td>
<td>4.8%</td>
<td>6.0%</td>
<td>7.5%</td>
<td>7.3%</td>
<td>9.5%</td>
<td>11.0%</td>
</tr>
<tr>
<td>inference time (s)</td>
<td>266</td>
<td>395</td>
<td>744</td>
<td>1366</td>
<td>2802</td>
<td>5681</td>
<td>10553</td>
<td>22596</td>
<td>41579</td>
</tr>
<tr>
<td>inference time (h)</td>
<td>0.1</td>
<td>0.1</td>
<td>0.2</td>
<td>0.4</td>
<td>0.8</td>
<td>1.6</td>
<td>2.9</td>
<td>6.3</td>
<td>11.5</td>
</tr>
</tbody>
</table>
<ul>
<li>The inference time increases ~linearly with the number of predictions</li>
<li>The ratio of unique outputs decreases with the number of predictions, being just 20% with 512 predictions. Thus we could get the same results with around 100 predictions if we can always generate novel outputs.</li>
<li>The number of solved tasks increases log-linearly with the number of predictions</li>
</ul>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../res/1761318484651_image.png" data-desc-position="bottom"><img alt="alt text" src="../res/1761318484651_image.png"></a></p>
<p>This uses only one GPU, and we were able to do 512 predictions for 400 tasks in 12 hours. With 4 GPUs and 240 tasks, we could be making close to 4096 predictions per task.
Or if we devote half of the time to training, we could do 2048 predictions per task. Sounds like a big enough number.</p>
<p>In the next experiments I have to answer the question: can I improve this results using a more advanced search?
For the same compute budget (number of predictions), can we improve the metrics and/or the unique outputs ratio?</p>
<h3 id="can-we-increase-the-unique-outputs-by-conditioning-on-already-generated-code">Can we increase the unique outputs by conditioning on already generated code?</h3>
<p>I have the belief that if we provide the model the already generated code and ask to implement different
approaches to the problem, the unique outputs will increase.</p>
<p>However the results below show that my intuition was wrong. In fact I get the opposite effect, the model
does not understand the instruction and the diversity is reduced. Furthermore in many of the tasks
copied the sample code exactly.</p>
<table>
<thead>
<tr>
<th>experiment</th>
<th>valid outputs</th>
<th>unique outputs</th>
<th>exact duplicates</th>
</tr>
</thead>
<tbody>
<tr>
<td>independent search</td>
<td>87.3%</td>
<td>77.1%</td>
<td>0.0%</td>
</tr>
<tr>
<td>sequential search v1</td>
<td>91.8%</td>
<td>66.4%</td>
<td>13.0%</td>
</tr>
<tr>
<td>sequential search v2</td>
<td>92.6%</td>
<td>69.0%</td>
<td>8.0%</td>
</tr>
<tr>
<td>sequential search v3</td>
<td>91.0%</td>
<td>69.9%</td>
<td>5.8%</td>
</tr>
<tr>
<td>sequential search v4 (system prompt)</td>
<td>89.5%</td>
<td>71.8%</td>
<td>0.8%</td>
</tr>
<tr>
<td>v4 + repetition_penalty=1.05</td>
<td>88.1%</td>
<td>72.7%</td>
<td>0.5%</td>
</tr>
<tr>
<td>v4 + repetition_penalty=1.1</td>
<td>81.8%</td>
<td>72.1%</td>
<td>0.0%</td>
</tr>
<tr>
<td>v4 + repetition_penalty=1.2</td>
<td>63.3%</td>
<td>61.1%</td>
<td>0.0%</td>
</tr>
<tr>
<td>v1 +  repetition_penalty=1.05</td>
<td>91.9%</td>
<td>71.5%</td>
<td>4.8%</td>
</tr>
<tr>
<td>v1 +  repetition_penalty=1.1</td>
<td>87.5%</td>
<td>70.3%</td>
<td>1.3%</td>
</tr>
<tr>
<td>refine prompt v1</td>
<td>95.5%</td>
<td>63.9%</td>
<td>19.0%</td>
</tr>
</tbody>
</table>
<p>The results show that none of the sequential search experiments gets a similar unique output ratio
to simply do independent search. I was able to tune the prompt in the different versions of the
sequential search, and I saw improvements but the problem persisted.</p>
<p>Thus this is not a good strategy for searching (at least with this base model). I believe RL could
solve this, and maybe bigger models do better.</p>
<p>I have to look for diversity elsewhere. Maybe more worrying is that I have tried a prompt with the goal
of refining the existing code, and the exact duplicates rate was the highest of all the experiments: 19%.
Thus it seems that if I want to refine code, I'm going to throw many attempts to the trash can.</p>
<ul>
<li><a href="https://g.co/gemini/share/fdc61d549f8a">Gemini 2.5 Pro explanation</a></li>
<li><a href="https://chatgpt.com/share/6888f931-ee80-8012-99eb-355934748062">o3 explanation</a></li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>This experimentation successfully demonstrated that a base code-generation model using a DSL can solve a subset of ARC tasks. 
The best experiment solved 11.5% of the training tasks.
The two most critical factors for success were model size and prediction volume. 
Larger models consistently produced higher-quality solutions and solved more tasks. </p>
<p>The most effective strategy was a simple brute-force approach, generating hundreds of independent solutions per task, as this method significantly outperformed more complex search techniques aimed at refinement or increasing diversity. These "smarter" search prompts were counterproductive, often reducing the variety of generated outputs. While effective, the brute-force method is inefficient, suffering from diminishing returns in solution uniqueness.</p>
<h2 id="next-steps">Next steps</h2>
<ul>
<li>Try to increase search diversity</li>
<li>Refine solution</li>
</ul>
<h2 id="todo">TODO</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled checked> How many primitive functions does BARC have? And Hodel?</li>
<li class="task-list-item"><input type="checkbox" disabled checked> Create a prompt with the available DSL functions</li>
<li class="task-list-item"><input type="checkbox" disabled checked> What is the best way to do inference?<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled checked> VLLM</li>
<li class="task-list-item"><input type="checkbox" disabled checked> Pure python with caching</li>
<li class="task-list-item"><input type="checkbox" disabled> SGLang (I'm not going to try it this iteration)</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled checked> What is the effect of the model size?</li>
</ul>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
    </span>
    2025-10-24
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../Iteration_15_the_path_forward/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Iteration 15. The path forward: Search &amp;amp; Learn">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Iteration 15. The path forward: Search &amp; Learn
              </div>
            </div>
          </a>
        
        
          
          <a href="../Iteration_17_increase_search_diversity/" class="md-footer__link md-footer__link--next" aria-label="Next: Iteration 17. Increase search diversity">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Iteration 17. Increase search diversity
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2025. Guillermo Barbadillo
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/guillermobarbadillo/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/guille_bar" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"></path></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/channel/UCOHmUwHnd2hmUpiDzaQ1Isg" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"></path></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.kaggle.com/ironbar" target="_blank" rel="noopener" title="www.kaggle.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M304.2 501.5 158.4 320.3 298.2 185c2.6-2.7 1.7-10.5-5.3-10.5h-69.2c-3.5 0-7 1.8-10.5 5.3L80.9 313.5V7.5q0-7.5-7.5-7.5H21.5Q14 0 14 7.5v497q0 7.5 7.5 7.5h51.9q7.5 0 7.5-7.5v-109l30.8-29.3 110.5 140.6c3 3.5 6.5 5.3 10.5 5.3h66.9q5.25 0 6-3z"></path></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "navigation.footer"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.525ec568.min.js"></script>
      
        <script src="../../javascript/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>